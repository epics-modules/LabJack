#------------------------------------------------------------------------------
# Linux startup file
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
# Define environment variables
< envPaths

epicsEnvSet("P", "xyz:")

#------------------------------------------------------------------------------
# Register all support components
dbLoadDatabase("../../dbd/LabJackApp.dbd")
LabJackApp_registerRecordDeviceDriver(pdbbase)

#------------------------------------------------------------------------------
#
###  LabJack support  ###
#
# Load one LabJack_T7.cmd file for each LabJack module this ioc will support
# Must set N and IP_ADDRESS differently for each one.


iocshLoad("LabJack_T7.cmd", "N=1, IP_ADDRESS=gse-labjack1")
iocshLoad("LabJack_T7.cmd", "N=2, IP_ADDRESS=gse-labjack2")
#iocshLoad("LabJack_T7.cmd", "N=2, IP_ADDRESS=gse-labjack3")
#iocshLoad("LabJack_T4.cmd", "N=1, IP_ADDRESS=gse-labjack4")

#------------------------------------------------------------------------------
# Configure auto save/restore
< save_restore.cmd

#------------------------------------------------------------------------------
# Start IOC
iocInit()

#------------------------------------------------------------------------------
# Start autosave

# Monitor every five seconds
#create_monitor_set("auto_positions.req",5,"P=xyz:")

# Monitor every ten seconds
create_monitor_set("auto_settings.req",10,"P=xyz:")

#
#------------------------------------------------------------------------------
